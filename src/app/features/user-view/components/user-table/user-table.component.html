@if(tableForm){
<form [formGroup]="tableForm">
    <table>
        <thead>
        <tr>
        @for (item of tableHeaderKeys; track item) {
            <th>{{tableHeaders[item]}}</th>
        }
        </tr>
        </thead>
        <tbody>
            <ng-container formArrayName="userTableRows">
                @for (formGroupItem of getUserTableRows(tableForm).controls; track formGroupItem; let idx = $index) {
                    <tr [formGroupName]="idx">
                        @for (item of tableHeaderKeys; track item) {
                            @if(item ==='id') {
                                <td>{{formGroupItem.get('id')?.value}}</td>
                            }@else if (item === 'isEditing') {
                                <td>
                                    @if (formGroupItem.get('isEditing')?.value) {
                                        <button [attr.aria-label]="saveAriaLabel + idx" type="button" (click)="saveRow(idx)">{{ saveLabel }}</button>
                                    }@else {
                                        <button [attr.aria-label]="editAriaLabel + idx" type="button" (click)="editRow(idx)">{{editLabel}}</button>
                                    }
                                </td>
                            } @else if(item ==='email') {
                                <td><label for="email-{{idx}}" class="visually-hidden">Email</label><input name="email-{{idx}}" type="email" [formControlName]="item"/></td>
                            } @else {
                                <td><label for="{{item}}-{{idx}}" class="visually-hidden">{{tableHeaders[item]}}</label><input name="{{item}}-{{idx}}" type="text" [formControlName]="item"/></td>
                                }
                        }
                        
                    </tr>
                }
                
            </ng-container>
        </tbody>
      </table>
</form>
}